{% load repeat %}
{% withul %}
{% for section, appear, fullUrl, alias, selected, children, options in gen %}
    {% with appearOpts=appear %}
	{% if appearOpts.appear %}

    <li{% if selected %}{% block selectedAttrs %} class="selected"{% endblock %}{% else %}{% block nonSelectedAttrs %}{% endblock %}{% endif %}>
        {% block insideLiLink %}<a href="{{fullUrl|join:'/'}}">{{alias}}</a>{% endblock %}
        {% block insideLi %}{% if selected and children %}{% repeat children "heirarchial.html" %}{% endif %}{% endblock %}
    </li>

	{% endif %}
    {% endwith %}

{% endfor %}
{% endwithul %}
